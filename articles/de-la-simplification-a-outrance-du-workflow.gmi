---
title: De la simplification √† outrance du workflow
date: 2023-10-04
authors:
  - Tim
tags:
  - s√©mantique
  - n√©vrose
---

√Ä l'origine, j'√©tais comme tout le monde, je cherchais √† simplifier au maximum mon workflow et j'en suis venu sans trop r√©fl√©chir √† opter pour un convertisseur Markdown ‚Üí HTML. Cette p√©riode est d√©sormais r√©volue et je prends un certain plaisir √† naviguer dans la doc' en ligne de Mozilla √† la recherche de la balise parfaitement adapt√©e √† chaque situation.

> Oui mais Condor HTML et Markdown ne sont pas antinomiques. Ces deux approches sont conciliables, on peut √©crire du HTML _inlin√©_ dans du Markdown !

üÜóüÜí mais pourquoi rajouter une _build-step_ en plus pour g√©n√©rer les 3 pauvres balises <h1> de vos articles de minable. Soyons s√©rieux, le HTML est largement autosuffisant et assez peu verbeux dans ses moutures modernes. Il y a litt√©ralement une trentaine de cas o√π le balise fermante <p> peut √™tre omise.

=> https://html.spec.whatwg.org/multipage/syntax.html#optional-tags

Maintenant que je vous ai fait descendre de la tour de Babel √† g√©n√©rer de dette technique en haut de laquelle vous vous √©tiez hiss√©s, √©voquons les probl√®mes r√©currents de Markdown.

## La mani√®re dont les gens se servent du Markdown est fondamentalement incorrecte

Markdown ne comprend rien √† ce que vous √©crivez. Je m'explique, consid√©rez le document suivant :
```markdown
>Mignonne, allons voir si la rose
>Qui ce matin avoit desclose
>Sa robe de pourpre au Soleil,
>A point perdu ceste vespr√©e
>Les plis de sa robe pourpr√©e,
>Et son teint au vostre pareil.
>
>Las ! voyez comme en peu d‚Äôespace,
>Mignonne, elle a dessus la place
>Las ! las ses beautez laiss√© cheoir !
>√î vrayment marastre Nature,
>Puis qu‚Äôune telle fleur ne dure
>Que du matin jusques au soir !
>
>Donc, si vous me croyez, mignonne,
>Tandis que vostre √¢ge fleuronne
>En sa plus verte nouveaut√©,
>Cueillez, cueillez vostre jeunesse :
>Comme √† ceste fleur la vieillesse
>Fera ternir vostre beaut√©.

Pierre de Ronsard, _Les Odes_
```

qui est √©quivalent en HTML √† :

```html
<blockquote>
  <p>
    Mignonne, allons voir si la rose
    Qui ce matin avoit desclose
    Sa robe de pourpre au Soleil,
    A point perdu ceste vespr√©e
    Les plis de sa robe pourpr√©e,
    Et son teint au vostre pareil.
  </p>
  <p>
    ...
  </p>
  <p>
    ...
  </p>
</blockquote>

<p>
  Pierre de Ronsard, <em>Les Odes</em>
</p>
```

On remarque plusieurs probl√®mes :
* Personne ne comprend rien ;
* Mort de la s√©mantique ;
* Les gens comprennent uniquement gr√¢ce au rendu : Markdown devient une sorte de CSS light ;
* T'es hors sujet avec tes balises √©parpill√©es gros.

Observez plut√¥t :

```html
<figure>
  <blockquote>
    <p>
      Mignonne, allons voir si la rose
      Qui ce matin avoit desclose
      Sa robe de pourpre au Soleil,
      A point perdu ceste vespr√©e
      Les plis de sa robe pourpr√©e,
      Et son teint au vostre pareil.
    <p>
      ...
    <p>
      ...
  </blockquote>

  <figcaption>
    Pierre de Ronsard, <cite>Les Odes</cite>
  </figcaption>
</figure>
```

On remarque :
* Ne demande pas fonci√®rement plus d'efforts pour une personne digne ;
* Soigneusement √©crit ;
* Vrai ;
* Beau ;
* Juste.

## Les biblioth√®ques Markdown g√©n√®rent n'imp

Un autre exemple, avec ce bout de Markdown :
```markdown
<p>
  Foo

  Bar
</p>
```

La majorit√© des lib' produiront un code HTML √©quivalent √† :
```html
<p>
  Foo

  <p>
    Bar
  </p>
</p>
```

Ce qui est, je vous le donne en mille, du HTML malform√©, avec tous les probl√®mes en mati√®re de composabilit√© que cela engendre, ‚ÑØ‚Ñä corrompre le rendu d'un lecteur RSS qui comptait sur votre rigueur pour faire son job correctement.

On pourra toujours objecter :
> Oui mais Condor ce ne sont pas des probl√®mes li√©s au Markdown en soi, c'est juste les librairies que tu utilises qui sont √† chier.

üÜóüÜí bah faites-mieux alors.

## Le Markdown n'est sp√©cifi√© nulle part

Utiliser Markdown ? Ok mais quelle version ? Le ¬´ vanilla ¬ª tel que penser par feu Aaron Swartz ? Le GitHub flavored ? Celui qui permet de g√©n√©rer une table des mati√®res automatiquement mais pas d'√©crire des tableaux ?

Vous comprenez o√π je veux en venir : cette jungle est insupportable. Certes CommonMark se veut √™tre une solution mais il arrive un peu apr√®s la guerre car sorti initialement en 2014 (c'est-√†-dire la m√™me ann√©e que HTML5 et plus de 10 ans apr√®s Markdown).

=> https://daringfireball.net/projects/markdown/syntax
=> https://commonmark.org/

## √âtudes de probl√©matiques sous-jacentes

* C'est super chiant √† parser Markdown putain. En comparaison, HTML est quasiment du XML. On sait le parser depuis 25 ans ;
* Du fait des raisons √©num√©r√©es plus haut, Markdown pour l'accesibilit√© c'est √† chier.

## Conclusion

√âcrivez du HTML, vous √©viterez de vous tirer une balle dans le pied. Continuez d'utiliser Markdown pour vos readme niais de projet √† 2 stars mais pas pour cibler un rendu HTML.

Tant qu'√† faire, s'il vous pla√Æt de gr√¢ce, arrangez-vous pour que votre HTML soit valide, par exemple en utilisant le v√©rificateur en ligne du W3C et laissez-vous bercer par cet agr√©able √©cran :

=> /images/douce-vie.jpg La vie est douce, c'est une sieste dans la soie

En plus, vous √©coperez d'un badge mignon qui ajoutera un charme certain √† vos pages Web :

=> https://www.w3.org/TR/badging/

## Bonus

Lors de l'√©criture de cet article, je suis tomb√© sur cet int√©ressant thread qu'on peut r√©sumer assez trivialement par :
> Faites des outils pour rendre HTML agr√©able au lieu de perdre du temps avec du Markdown abruti

=> https://merveilles.town/@neauoire/111154810425383324

## Un dernier mot

Oui, on utilise Gemtext pour le blog, c'est encore pire que Markdown mais au moins le HTML de notre site est correct contrairement au votre. Vous pouvez d'ailleurs admirer nos efforts pour que le HTML g√©n√©r√© par notre proxy HTTP fasse sens ici :
=> https://github.com/Psi-Prod/Proximite-2/blob/master/html_of_gemtext.ml

Je songe de plus en plus √† g√©n√©rer statiquement une version HTML du site et simplement la serve comme on le fait pour Gemini mais L√©o dit que je suis un con.

=> /images/hypocrisie.jpg Les lecteurs de Heyplzlookatme apr√®s l'article
